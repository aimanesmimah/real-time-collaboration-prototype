/*!
 * jquery.sidebar v1.0.2
 * http://sideroad.secret.jp/
 *
 * Copyright (c) 2009 sideroad
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * Date: 2009-09-01
 */
(function(a,b){a.fn.sidebar=function(c){return this.each(function(){var x=a(this),A=x.data("sidebar")||{},p,u,q,d=A.duration,j,s,e,i,g,z,w,h,y,f,r,m=a("<div><div/>"),t=a("<div><div/>"),l=a("<div><div/>"),v,k,n=function(){var E=x.data("sidebar")||{},F=E.callback.sidebar.open,C=E.container,D=E.inject,B=E.body;if(E.isEnter||E.isProcessing){return}E.isEnter=true;E.isProcessing=true;C.animate(E.animate.container.enter,{duration:d,complete:function(){D.fadeOut(d,function(){B.show("clip",d,function(){E.isProcessing=false;if(F){F()}})})}})},o=function(){var F=x.data("sidebar")||{},D=F.callback.sidebar.close,C=F.container,E=F.inject,B=F.body;if(!F.isEnter||F.isProcessing){return}F.isProcessing=true;C.animate(F.animate.container.leave,{duration:d,complete:function(){B.hide("clip",d,function(){E.fadeIn(d,function(){F.isEnter=false;F.isProcessing=false;if(D){D()}})})}})};if(typeof c==="string"){switch(c){case"open":n();break;case"close":o();break}return}c=a.extend(true,{root:a(document.body),position:"left",callback:{item:{enter:function(){a(this).animate({marginLeft:"5px"},250)},leave:function(){a(this).animate({marginLeft:"0px"},250)}},sidebar:{open:function(){},close:function(){}}},animate:{container:{enter:{},leave:{}}},duration:200,open:"mouseenter.sidebar",close:"mouseleave.sidebar"},c);v=c.root;r=!v.is(document.body);k=(r)?v.addClass("sidebar-root"):a(b);z=c.position;d=c.duration;m.attr("id","jquerySideBar"+new Date().getTime()).addClass("sidebar-container").addClass(z);t.addClass("sidebar-inject").addClass(z);l.addClass("sidebar-body");l.append(this);m.append(l);m.append(t);v.append(m);u=m.width();q=m.height();j=t.width();s=t.height();i={height:q,width:u};g={height:q,width:u};if(z==="left"||z==="right"){p=u-j;e={height:q,width:j};i.top=c.top||(k.height()/2)-(q/2)+"px"}else{p=q-s;e={height:s,width:u};i.left=c.left||(k.width()/2)-(u/2)+"px"}i[z]="-"+p+"px";e[z]=p+"px";c.animate.container.enter[z]=0;c.animate.container.leave[z]="-"+p;m.css(i);t.css(e);l.css(g).hide();a(this).addClass("sidebar-menu").find("li").bind("mouseenter.sidebar",c.callback.item.enter).bind("mouseleave.sidebar",c.callback.item.leave);if(c.open){m.bind(c.open,n)}if(c.close){m.bind(c.close,o)}c.container=m;c.inject=t;c.body=l;x.data("sidebar",c);k.resize(function(){if(z==="left"||z==="right"){m.css({top:(a(this).height()/2)-(q/2)+"px"})}else{m.css({left:(a(this).width()/2)-(u/2)+"px"})}})})}}(jQuery,this));