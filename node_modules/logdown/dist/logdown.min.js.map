{"version":3,"sources":["logdown.js"],"names":["Logdown","prefix","opts","this","normalizeOpts","isPrefixAlreadyInUse","_instances","getInstanceByPrefix","push","alignPrefixes","updateEnabledDisabled","sanitizeStringToBrowser","prefixColor","alignOutput","Boolean","markdown","undefined","isBrowser","colors","lastUsedColorIndex","length","isNode","getNextPrefixColor","instances","longest","sort","a","b","forEach","instance","padding","Array","Math","max","join","envVar","process","env","NODE_DEBUG","DEBUG","disable","split","regExp","enable","window","localStorage","getItem","debug","parseMarkdown","text","styles","match","getNextMatch","replace","rule","regexp","replacer","style","matches","rules","submatch1","ansiColors","modifiers","bold","italic","bgColors","bgYellow","black","index","prepareOutputToBrowser","args","parsedMarkdown","preparedOutput","isColorSupported","concat","splice","prepareOutputToNode","method","yellow","red","blue","gray","arg","isDisabled","isDisabled_","filterRegExps","filter","type","test","prepareRegExpForPrefixSearch","str","RegExp","isPrefixAlreadyInUse_","instanceCur","isWebkit","document","documentElement","isFirebug","console","firebug","exception","table","isFirefox31Plus","navigator","userAgent","toLowerCase","parseInt","$1","stdout","isTTY","platform","TERM","module","exports","reset","dim","underline","inverse","hidden","strikethrough","green","magenta","cyan","white","bgBlack","bgRed","bgGreen","bgBlue","bgMagenta","bgCyan","bgWhite","prototype","call","arguments","substr","methods","slice","Function","apply","log","lastUsed","nodePrefixColors"],"mappings":"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","file":"logdown.min.js","sourcesContent":["/**\n * logdown - Debug utility with markdown support that runs on browser and server\n *\n * @version v2.2.0\n * @link https://github.com/caiogondim/logdown\n * @author Caio Gondim <me@caiogondim.com> (http://caiogondim.com)\n * @license MIT\n */\n/* global console, module, window, document, navigator, process */\n\n;(function () {\n  'use strict'\n\n  var lastUsedColorIndex = 0\n  // Solarized accent colors http://ethanschoonover.com/solarized\n  var colors = [\n    '#B58900',\n    '#CB4B16',\n    '#DC322F',\n    '#D33682',\n    '#6C71C4',\n    '#268BD2',\n    '#2AA198',\n    '#859900'\n  ]\n  // Taken from ansi-styles npm module\n  // https://github.com/sindresorhus/ansi-styles/blob/master/index.js\n  var ansiColors = {\n    modifiers: {\n      reset: [0, 0],\n      bold: [1, 22], // 21 isn't widely supported and 22 does the same thing\n      dim: [2, 22],\n      italic: [3, 23],\n      underline: [4, 24],\n      inverse: [7, 27],\n      hidden: [8, 28],\n      strikethrough: [9, 29]\n    },\n    colors: {\n      black: [30, 39],\n      red: [31, 39],\n      green: [32, 39],\n      yellow: [33, 39],\n      blue: [34, 39],\n      magenta: [35, 39],\n      cyan: [36, 39],\n      white: [37, 39],\n      gray: [90, 39]\n    },\n    bgColors: {\n      bgBlack: [40, 49],\n      bgRed: [41, 49],\n      bgGreen: [42, 49],\n      bgYellow: [43, 49],\n      bgBlue: [44, 49],\n      bgMagenta: [45, 49],\n      bgCyan: [46, 49],\n      bgWhite: [47, 49]\n    }\n  }\n  var filterRegExps = []\n\n  function Logdown (prefix, opts) {\n    if (!(this instanceof Logdown)) {\n      return new Logdown(prefix, opts)\n    }\n\n    this.opts = normalizeOpts(prefix, opts)\n\n    if (isPrefixAlreadyInUse(this.opts.prefix, Logdown._instances)) {\n      return getInstanceByPrefix(this.opts.prefix, Logdown._instances)\n    }\n\n    Logdown._instances.push(this)\n    alignPrefixes(Logdown._instances)\n    updateEnabledDisabled()\n\n    return this\n  }\n\n  //\n  // Static\n  //\n\n  Logdown._instances = []\n\n  Logdown.enable = function () {\n    Array.prototype.forEach.call(arguments, function (str) {\n      if (str[0] === '-') {\n        Logdown.disable(str.substr(1))\n      }\n\n      var regExp = prepareRegExpForPrefixSearch(str)\n\n      if (str === '*') {\n        filterRegExps = []\n      } else {\n        filterRegExps.push({\n          type: 'enable',\n          regExp: regExp\n        })\n      }\n    })\n  }\n\n  Logdown.disable = function () {\n    Array.prototype.forEach.call(arguments, function (str) {\n      if (str[0] === '-') {\n        Logdown.enable(str.substr(1))\n      }\n\n      var regExp = prepareRegExpForPrefixSearch(str)\n\n      if (str === '*') {\n        filterRegExps = [{\n          type: 'disable',\n          regExp: regExp\n        }]\n      } else {\n        filterRegExps.push({\n          type: 'disable',\n          regExp: regExp\n        })\n      }\n    })\n  }\n\n  //\n  // Public\n  //\n\n  var methods = ['debug', 'log', 'info', 'warn', 'error']\n  methods.forEach(function (method) {\n    Logdown.prototype[method] = function () {\n      if (isDisabled(this)) {\n        return\n      }\n\n      var preparedOutput\n      var args = Array.prototype.slice.call(arguments, 0)\n\n      if (isBrowser()) {\n        preparedOutput = prepareOutputToBrowser(args, this)\n\n        // IE9 workaround\n        // http://stackoverflow.com/questions/5538972/\n        //  console-log-apply-not-working-in-ie9\n        Function.prototype.apply.call(\n          console[method] || console.log,\n          console,\n          preparedOutput\n        )\n      } else if (isNode()) {\n        preparedOutput = prepareOutputToNode(args, method, this)\n        ;(console[method] || console.log).apply(\n          console,\n          preparedOutput\n        )\n      }\n    }\n  })\n\n  //\n  // Private\n  //\n\n  function normalizeOpts (prefix, opts) {\n    if (typeof prefix === 'object') opts = prefix\n    opts = opts || {}\n\n    if (typeof prefix !== 'string') prefix = opts.prefix || ''\n    prefix = sanitizeStringToBrowser(prefix)\n\n    var alignOutput = Boolean(opts.alignOutput)\n    var markdown = opts.markdown === undefined ? true : Boolean(opts.markdown)\n\n    var prefixColor\n    if (isBrowser()) {\n      prefixColor = colors[lastUsedColorIndex % colors.length]\n      lastUsedColorIndex += 1\n    } else if (isNode()) {\n      prefixColor = getNextPrefixColor()\n    }\n\n    return {\n      prefix: prefix,\n      alignOutput: alignOutput,\n      markdown: markdown,\n      prefixColor: prefixColor\n    }\n  }\n\n  function alignPrefixes (instances) {\n    var longest = instances.sort(function (a, b) {\n      return b.opts.prefix.length - a.opts.prefix.length\n    })[0]\n\n    instances.forEach(function (instance) {\n      if (instance.opts.alignOutput) {\n        var padding = new Array(Math.max(longest.opts.prefix.length - instance.opts.prefix.length + 1, 0)).join(' ')\n        instance.opts.prefix = instance.opts.prefix + padding\n      }\n    })\n  }\n\n  function updateEnabledDisabled () {\n    if (isNode()) {\n      // Parsing `NODE_DEBUG` and `DEBUG` env var.\n      var envVar = null\n      if (\n        typeof process !== 'undefined' &&\n        process.env !== undefined\n      ) {\n        // `NODE_DEBUG` has precedence over `DEBUG`\n        if (\n          process.env.NODE_DEBUG !== undefined &&\n          process.env.NODE_DEBUG !== ''\n        ) {\n          envVar = 'NODE_DEBUG'\n        } else if (\n          process.env.DEBUG !== undefined &&\n          process.env.DEBUG !== ''\n        ) {\n          envVar = 'DEBUG'\n        }\n\n        if (envVar) {\n          Logdown.disable('*')\n          process.env[envVar]\n            .split(',')\n            .forEach(function (regExp) {\n              Logdown.enable(regExp)\n            })\n        }\n      }\n    } else if (isBrowser()) {\n      if (\n        window.localStorage &&\n        typeof window.localStorage.getItem('debug') === 'string'\n      ) {\n        Logdown.disable('*')\n        window.localStorage.debug\n          .split(',')\n          .forEach(function (regExp) {\n            Logdown.enable(regExp)\n          })\n      }\n    }\n  }\n\n  function parseMarkdown (text) {\n    var styles = []\n    var match = getNextMatch(text)\n\n    while (match) {\n      text = text.replace(match.rule.regexp, match.rule.replacer)\n\n      if (isBrowser()) {\n        styles.push(match.rule.style)\n        styles.push('') // Empty string resets style.\n      }\n\n      match = getNextMatch(text)\n    }\n\n    return {text: text, styles: styles}\n  }\n\n  function getNextMatch (text) {\n    var matches = []\n    var rules = []\n    if (isBrowser()) {\n      rules = [\n        {\n          regexp: /\\*([^\\*]+)\\*/,\n          replacer: function (match, submatch1) {\n            return '%c' + submatch1 + '%c'\n          },\n          style: 'font-weight:bold;'\n        },\n        {\n          regexp: /_([^_]+)_/,\n          replacer: function (match, submatch1) {\n            return '%c' + submatch1 + '%c'\n          },\n          style: 'font-style:italic;'\n        },\n        {\n          regexp: /`([^`]+)`/,\n          replacer: function (match, submatch1) {\n            return '%c' + submatch1 + '%c'\n          },\n          style:\n            'background:#FDF6E3; ' +\n            'color:#586E75; ' +\n            'padding:1px 5px; ' +\n            'border-radius:4px;'\n        }\n      ]\n    } else if (isNode()) {\n      rules = [\n        {\n          regexp: /\\*([^\\*]+)\\*/,\n          replacer: function (match, submatch1) {\n            return '\\u001b[' + ansiColors.modifiers.bold[0] + 'm' +\n                   submatch1 +\n                   '\\u001b[' + ansiColors.modifiers.bold[1] + 'm'\n          }\n        },\n        {\n          regexp: /_([^_]+)_/,\n          replacer: function (match, submatch1) {\n            return '\\u001b[' + ansiColors.modifiers.italic[0] + 'm' +\n                   submatch1 +\n                   '\\u001b[' + ansiColors.modifiers.italic[1] + 'm'\n          }\n        },\n        {\n          regexp: /`([^`]+)`/,\n          replacer: function (match, submatch1) {\n            return '\\u001b[' + ansiColors.bgColors.bgYellow[0] + 'm' +\n                   '\\u001b[' + ansiColors.colors.black[0] + 'm' +\n                   ' ' + submatch1 + ' ' +\n                   '\\u001b[' + ansiColors.colors.black[1] + 'm' +\n                   '\\u001b[' + ansiColors.bgColors.bgYellow[1] + 'm'\n          }\n        }\n      ]\n    }\n\n    //\n    rules.forEach(function (rule) {\n      var match = text.match(rule.regexp)\n      if (match) {\n        matches.push({\n          rule: rule,\n          match: match\n        })\n      }\n    })\n    if (matches.length === 0) {\n      return null\n    }\n\n    //\n    matches.sort(function (a, b) {\n      return a.match.index - b.match.index\n    })\n\n    return matches[0]\n  }\n\n  function prepareOutputToBrowser (args, instance) {\n    var preparedOutput = []\n    var parsedMarkdown\n\n    if (instance.opts.prefix) {\n      if (isColorSupported()) {\n        preparedOutput.push('%c' + instance.opts.prefix + '%c ')\n        preparedOutput.push(\n          'color:' + instance.opts.prefixColor + '; font-weight:bold;',\n          '' // Empty string resets style.\n        )\n      } else {\n        preparedOutput.push('[' + instance.prefix + '] ')\n      }\n    } else {\n      preparedOutput.push('')\n    }\n\n    // Only first argument on `console` can have style.\n    if (typeof args[0] === 'string') {\n      if (instance.opts.markdown && isColorSupported()) {\n        parsedMarkdown = parseMarkdown(args[0])\n        preparedOutput[0] = preparedOutput[0] + parsedMarkdown.text\n        preparedOutput = preparedOutput.concat(parsedMarkdown.styles)\n      } else {\n        preparedOutput[0] = preparedOutput[0] + args[0]\n      }\n    } else {\n      preparedOutput[0] = args[0]\n    }\n\n    if (args.length > 1) {\n      preparedOutput = preparedOutput.concat(args.splice(1))\n    }\n\n    return preparedOutput\n  }\n\n  function prepareOutputToNode (args, method, instance) {\n    var preparedOutput = []\n\n    if (instance.opts.prefix) {\n      if (isColorSupported()) {\n        preparedOutput[0] =\n          '\\u001b[' + instance.opts.prefixColor[0] + 'm' +\n          '\\u001b[' + ansiColors.modifiers.bold[0] + 'm' +\n          instance.opts.prefix +\n          '\\u001b[' + ansiColors.modifiers.bold[1] + 'm' +\n          '\\u001b[' + instance.opts.prefixColor[1] + 'm'\n      } else {\n        preparedOutput[0] = '[' + instance.opts.prefix + ']'\n      }\n    }\n\n    if (method === 'warn') {\n      preparedOutput[0] =\n        '\\u001b[' + ansiColors.colors.yellow[0] + 'm' +\n        '⚠' +\n        '\\u001b[' + ansiColors.colors.yellow[1] + 'm ' +\n        (preparedOutput[0] || '')\n    } else if (method === 'error') {\n      preparedOutput[0] =\n        '\\u001b[' + ansiColors.colors.red[0] + 'm' +\n        '✖' +\n        '\\u001b[' + ansiColors.colors.red[1] + 'm ' +\n        (preparedOutput[0] || '')\n    } else if (method === 'info') {\n      preparedOutput[0] =\n        '\\u001b[' + ansiColors.colors.blue[0] + 'm' +\n        'ℹ' +\n        '\\u001b[' + ansiColors.colors.blue[1] + 'm ' +\n        (preparedOutput[0] || '')\n    } else if (method === 'debug') {\n      preparedOutput[0] =\n        '\\u001b[' + ansiColors.colors.gray[0] + 'm' +\n        '🐛' +\n        '\\u001b[' + ansiColors.colors.gray[1] + 'm ' +\n        (preparedOutput[0] || '')\n    }\n\n    args.forEach(function (arg) {\n      if (typeof arg === 'string') {\n        if (instance.opts.markdown) {\n          preparedOutput.push(parseMarkdown(arg).text)\n        } else {\n          preparedOutput.push(arg)\n        }\n      } else {\n        preparedOutput.push(arg)\n      }\n    })\n\n    return preparedOutput\n  }\n\n  function isDisabled (instance) {\n    var isDisabled_ = false\n    filterRegExps.forEach(function (filter) {\n      if (\n        filter.type === 'enable' &&\n        filter.regExp.test(instance.opts.prefix)\n      ) {\n        isDisabled_ = false\n      } else if (\n        filter.type === 'disable' &&\n        filter.regExp.test(instance.opts.prefix)\n      ) {\n        isDisabled_ = true\n      }\n    })\n\n    return isDisabled_\n  }\n\n  function prepareRegExpForPrefixSearch (str) {\n    return new RegExp('^' + str.replace(/\\*/g, '.*?') + '$')\n  }\n\n  function isPrefixAlreadyInUse (prefix, instances) {\n    var isPrefixAlreadyInUse_ = false\n\n    instances.forEach(function (instance) {\n      if (instance.opts.prefix === prefix) {\n        isPrefixAlreadyInUse_ = true\n        return\n      }\n    })\n    return isPrefixAlreadyInUse_\n  }\n\n  function getInstanceByPrefix (prefix, instances) {\n    var instance\n\n    instances.forEach(function (instanceCur) {\n      if (instanceCur.opts.prefix === prefix) {\n        instance = instanceCur\n        return\n      }\n    })\n\n    return instance\n  }\n\n  function sanitizeStringToBrowser (str) {\n    if (typeof str === 'string') {\n      return str.replace(/%c/g, '')\n    } else {\n      return str\n    }\n  }\n\n  /**\n   * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n   * and the Firebug extension (any Firefox version) are known\n   * to support \"%c\" CSS customizations.\n   *\n   * Code took from https://github.com/visionmedia/debug/blob/master/browser.js\n   */\n  function isColorSupported () {\n    if (isBrowser()) {\n      // Is webkit? http://stackoverflow.com/a/16459606/376773\n      var isWebkit = ('WebkitAppearance' in document.documentElement.style)\n      // Is firebug? http://stackoverflow.com/a/398120/376773\n      var isFirebug = (\n        window.console &&\n        (console.firebug || (console.exception && console.table))\n      )\n      // Is firefox >= v31?\n      // https://developer.mozilla.org/en-US/docs/Tools/\n      //  Web_Console#Styling_messages\n      var isFirefox31Plus = (\n        navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) &&\n        parseInt(RegExp.$1, 10) >= 31\n      )\n\n      return (isWebkit || isFirebug || isFirefox31Plus)\n    } else if (isNode()) {\n      if (process.stdout && !process.stdout.isTTY) {\n        return false\n      }\n\n      if (process.platform === 'win32') {\n        return true\n      }\n\n      if ('COLORTERM' in process.env) {\n        return true\n      }\n\n      if (process.env.TERM === 'dumb') {\n        return false\n      }\n\n      if (\n        /^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)\n      ) {\n        return true\n      }\n\n      return false\n    }\n  }\n\n  function isNode () {\n    return (\n      typeof module !== 'undefined' &&\n      typeof module.exports !== 'undefined'\n    )\n  }\n\n  function isBrowser () {\n    return (typeof window !== 'undefined')\n  }\n\n  var getNextPrefixColor = (function () {\n    var lastUsed = 0\n    var nodePrefixColors = [\n      [31, 39], // red\n      [32, 39], // green\n      [33, 39], // yellow\n      [34, 39], // blue\n      [35, 39], // magenta\n      [36, 39] // cyan\n    ]\n\n    return function () {\n      lastUsed += 1\n      return nodePrefixColors[lastUsed % nodePrefixColors.length]\n    }\n  })()\n\n  // Export module\n  if (isNode()) {\n    module.exports = Logdown\n  } else if (isBrowser()) {\n    window.Logdown = Logdown\n  }\n}())\n"],"sourceRoot":"/source/"}